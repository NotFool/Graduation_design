ffstream(st)
MOVStreamContext* sc
*sc = st->priv_data
if (st->codecpar->codec_id != AV_CODEC_ID_HEVC || !sc->sync_group_count)
sc->sample_offsets_count = 0
for (uint32_t i = 0;i < sc->ctts_count;i++)
if (sc->ctts_data[i].count > INT_MAX - sc->sample_offsets_count)
sc->sample_offsets_count += sc->ctts_data[i].count
av_freep(&sc->sample_offsets)
sc->sample_offsets = av_calloc(sc->sample_offsets_count, sizeof(*sc->sample_offsets))
if (!sc->sample_offsets)
for (uint32_t i = 0;i < sc->ctts_count;i++)
get_sgpd_sync_index(sc, HEVC_NAL_CRA_NUT)
build_open_gop_key_points(st)